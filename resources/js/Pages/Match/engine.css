/* ==========================================================================
   ENGINE MIN CSS (garde uniquement ce qui n'est pas clean en Tailwind)
   ========================================================================== */

/* --- helper: cacher sans dépendre de tailwind quand le JS toggle --- */
#game-wrapper .hidden,
#game-wrapper [hidden] { display: none !important; }

#game-wrapper .visually-hidden {
    border: 0;
    clip: rect(0, 0, 0, 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    white-space: nowrap;
    width: 1px;
}

/* ==========================================================================
   TERRAIN
   (gardé en CSS car gradient long + ratio + plein d'éléments positionnés)
   ========================================================================== */

#field-wrapper { position: relative; }

#field {
    width: 100%;
    padding-top: 60%;
    position: relative;
    border-radius: 16px;
    overflow: hidden;

    background: linear-gradient(
        90deg,
        #2f7b28 0%,
        #2f7b28 15%,
        #34852e 15%,
        #34852e 30%,
        #2f7b28 30%,
        #2f7b28 50%,
        #34852e 50%,
        #34852e 70%,
        #2f7b28 70%,
        #2f7b28 85%,
        #34852e 85%,
        #34852e 100%
    );

    box-shadow:
        0 15px 26px rgba(0,0,0,0.45),
        0 0 0 4px #fdfdfd inset;
}

/* Overlay IA (JS toggle .visible) */
#ai-turn-overlay {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0,0,0,0.18);
    color: #fff;
    font-size: 14px;
    font-weight: 600;
    text-shadow: 0 1px 2px rgba(0,0,0,0.8);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease;
    z-index: 10;
}
#ai-turn-overlay.visible { opacity: 1; }

/* Lignes / formes terrain */
.pitch-line {
    position: absolute;
    border: 2px solid rgba(245,245,245,0.95);
    pointer-events: none;
}
#border-rect { left: 3%; top: 3%; right: 3%; bottom: 3%; }
#halfway-line { left: 50%; top: 3%; bottom: 3%; border-left-width: 2px; border-right: none; }

#center-circle {
    position: absolute;
    left: 50%; top: 50%;
    width: 18%; height: 36%;
    border-radius: 50%;
    border: 2px solid rgba(245,245,245,0.95);
    transform: translate(-50%, -50%);
    pointer-events: none;
}

.penalty-box {
    position: absolute;
    top: 20%;
    width: 18%;
    height: 60%;
    border: 2px solid rgba(245,245,245,0.95);
    pointer-events: none;
}
#penalty-left { left: 3%; }
#penalty-right { right: 3%; }

.goal-area {
    position: absolute;
    top: 32%;
    width: 8%;
    height: 36%;
    border: 2px solid rgba(245,245,245,0.95);
    pointer-events: none;
}
#goal-area-left { left: 3%; }
#goal-area-right { right: 3%; }

.spot {
    position: absolute;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #fefefe;
    box-shadow: 0 0 4px rgba(0,0,0,0.5);
}
#center-spot { left: 50%; top: 50%; transform: translate(-50%,-50%); }
#pen-spot-left { left: 13%; top: 50%; transform: translate(-50%,-50%); }
#pen-spot-right { right: 13%; top: 50%; transform: translate(50%,-50%); }

.goal {
    position: absolute;
    width: 10px;
    height: 30%;
    background: #8c8c8c;
    top: 35%;
    box-shadow: 0 3px 5px rgba(0,0,0,0.4), 0 0 0 2px #f9f9f9 inset;
}
#goal-left { left: -3px; }
#goal-right { right: -3px; }

/* ==========================================================================
   PIONS + BALLON (gardé car easing custom + styles internal/external)
   ========================================================================== */

.player {
    position: absolute;
    width: 35px;
    height: 35px;
    border-radius: 999px;
    border: 2px solid #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: 700;
    transform: translate(-50%, -50%);
    text-shadow: 0 0 3px rgba(0,0,0,0.6);
    transition:
        left 0.70s cubic-bezier(0.22, 0.61, 0.36, 1),
        top  0.70s cubic-bezier(0.22, 0.61, 0.36, 1),
        box-shadow 0.20s;
}

/* thèmes équipe */
.player.internal {
    background: radial-gradient(circle at 30% 30%, #8ad0ff 0, #0074ff 70%);
    box-shadow: 0 3px 6px rgba(0,0,0,0.45);
}
.player.external {
    background: radial-gradient(circle at 30% 30%, #ffd19a 0, #ff7f35 70%);
    box-shadow: 0 3px 6px rgba(0,0,0,0.45);
}
.player.goalkeeper {
    box-shadow: 0 0 8px rgba(255,255,0,0.9), 0 3px 6px rgba(0,0,0,0.55);
}

/* mini endurance sur pion (JS toggle .show-endurance) */
.player .endurance-shell {
    position: absolute;
    left: 50%;
    bottom: -5px;
    transform: translateX(-50%);
    width: 70%;
    height: 4px;
    border-radius: 999px;
    background: rgba(0,0,0,0.35);
    overflow: hidden;
    opacity: 0;
    transition: opacity 0.2s ease;
}
.player.show-endurance .endurance-shell { opacity: 1; }
.player .endurance-bar { height: 100%; width: 100%; border-radius: inherit; background: #4de074; }

.player.e-high { filter: none; }
.player.e-mid  { filter: brightness(1.05) saturate(1.1); }
.player.e-low  { filter: brightness(0.95) saturate(1.2); }
.player.e-crit { filter: brightness(0.9) saturate(1.4); }

/* Ballon */
#ball {
    position: absolute;
    width: 20px;
    height: 20px;
    border-radius: 999px;
    background: radial-gradient(circle at 30% 30%, #ffffff 0, #f0e6b5 40%, #d1c56a 100%);
    border: 2px solid rgba(115,105,35,0.8);
    transform: translate(-50%, -50%);
    box-shadow: 0 4px 8px rgba(0,0,0,0.6);
    z-index: 5;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: 700;
    text-shadow: 0 0 2px rgba(0,0,0,0.8);
    transition:
        left 0.70s cubic-bezier(0.22, 0.61, 0.36, 1),
        top  0.70s cubic-bezier(0.22, 0.61, 0.36, 1),
        transform 0.15s ease-out;
}
.ball-kick { transform: translate(-50%, -52%) scale(1.05); }

/* Indicateur tour */
#turn-indicator {
    position: absolute;
    right: 10px;
    bottom: -32px;
    width: 30px;
    height: 30px;
    background: #000;
    color: #fff;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 13px;
    font-variant-numeric: tabular-nums;
    box-shadow: 0 2px 4px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.4) inset;
}

/* ==========================================================================
   ETATS / ANIMATIONS JS (dice / action-bar / energy)
   ========================================================================== */

/* Chip duel (JS toggle .visible + .pop) */
.dice-chip {
    font-size: 10px;
    padding: 2px 8px;
    border-radius: 999px;
    background: rgba(0,0,0,0.06);
    color: #222;
    font-variant-numeric: tabular-nums;
    opacity: 0;
    transform: scale(0.8);
    transition: opacity 0.25s ease, transform 0.25s ease;
    white-space: nowrap;
}
.dice-chip.visible { opacity: 1; transform: scale(1); }
.dice-chip.pop { animation: dice-pop 0.45s ease-out; }
@keyframes dice-pop {
    0% { transform: scale(0.8); }
    40% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

/* Action bar switch (JS toggle fade-in/out) */
#action-bar.fade-out { opacity: 0; transform: translateY(8px); pointer-events: none; }
#action-bar.fade-in  { opacity: 1; transform: translateY(0); pointer-events: auto; }

/* Energy fill états (JS set class e-high/e-mid/e-low/e-crit) */
#energy-fill { transition: width 0.3s ease, background 0.25s ease, box-shadow 0.25s ease; }
#energy-fill.e-high { background: linear-gradient(90deg, #38b000, #9ef01a); }
#energy-fill.e-mid  { background: linear-gradient(90deg, #f2c94c, #f2994a); }
#energy-fill.e-low  { background: linear-gradient(90deg, #ff8e53, #ff3d00); }
#energy-fill.e-crit { background: linear-gradient(90deg, #ff1744, #d50000); }

#defender-energy-fill { transition: width 0.3s ease, background 0.25s ease, box-shadow 0.25s ease; }
#defender-energy-fill.e-high { background: linear-gradient(90deg, #38b000, #9ef01a); }
#defender-energy-fill.e-mid  { background: linear-gradient(90deg, #f2c94c, #f2994a); }
#defender-energy-fill.e-low  { background: linear-gradient(90deg, #ff8e53, #ff3d00); }
#defender-energy-fill.e-crit { background: linear-gradient(90deg, #ff1744, #d50000); }


/* ==========================================================================
   ACTION BAR (cards) — nécessaire car HTML injecté par engine.js
   ========================================================================== */

#bars-container {
    margin-top: 30px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* zone qui contient les cartes */
#action-bar {
    display: block;
    width: 100%;
    margin: 0 auto;
    border-radius: 16px;
    padding: 12px;
    background: rgba(255,255,255,0.85);
    box-shadow: 0 12px 22px rgba(0,0,0,0.18);
    border: 1px solid rgba(0,0,0,0.06);
}

/* strips */
#attack-strip,
#defense-strip {
    display: grid;
    grid-template-columns: repeat(4, minmax(0, 1fr));
    gap: 12px;
    align-items: stretch;
}

/* GK strip (3 cartes) */
#defense-strip:has(.def-card[data-defense="hands"]),
#defense-strip:has(.def-card[data-defense="punch"]) {
    grid-template-columns: repeat(3, minmax(0, 1fr));
}

/* responsive */
@media (max-width: 900px) {
    #attack-strip,
    #defense-strip {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
}

/* ==========================================================================
   THEMES selon le mode (engine.js met mode-attack-* / mode-defense-*)
   ========================================================================== */

/* attaque internal */
#action-bar.mode-attack-internal .skill-card {
    background: linear-gradient(180deg, rgba(239,246,255,0.95), rgba(255,255,255,0.92));
    border-color: rgba(59,130,246,0.18);
}

/* attaque external */
#action-bar.mode-attack-external .skill-card {
    background: linear-gradient(180deg, rgba(255,247,237,0.95), rgba(255,255,255,0.92));
    border-color: rgba(249,115,22,0.18);
}

/* defense internal */
#action-bar.mode-defense-internal .def-card {
    background: linear-gradient(180deg, rgba(240,253,244,0.95), rgba(255,255,255,0.92));
    border-color: rgba(34,197,94,0.16);
}

/* defense external */
#action-bar.mode-defense-external .def-card {
    background: linear-gradient(180deg, rgba(254,242,242,0.95), rgba(255,255,255,0.92));
    border-color: rgba(239,68,68,0.16);
}

/* ==========================================================================
   ACTION CARDS — accent couleur par équipe (via classes mode-*)
   ========================================================================== */

/* petit bandeau couleur en haut de chaque carte */
.skill-card,
.def-card { position: relative; overflow: hidden; }

.skill-card::before,
.def-card::before{
    content: "";
    position: absolute;
    left: 0; right: 0; top: 0;
    height: 6px;
    opacity: 0.95;
}

/* Attaque INTERNAL (bleu) */
#action-bar.mode-attack-internal .skill-card{
    border-color: rgba(59,130,246,0.28);
    box-shadow: 0 10px 18px rgba(0,0,0,0.16), 0 0 0 1px rgba(59,130,246,0.10) inset;
}
#action-bar.mode-attack-internal .skill-card::before{
    background: linear-gradient(90deg, rgba(59,130,246,0.95), rgba(147,197,253,0.95));
}

/* Attaque EXTERNAL (orange) */
#action-bar.mode-attack-external .skill-card{
    border-color: rgba(249,115,22,0.28);
    box-shadow: 0 10px 18px rgba(0,0,0,0.16), 0 0 0 1px rgba(249,115,22,0.10) inset;
}
#action-bar.mode-attack-external .skill-card::before{
    background: linear-gradient(90deg, rgba(249,115,22,0.95), rgba(253,186,116,0.95));
}

/* Défense INTERNAL (vert) */
#action-bar.mode-defense-internal .def-card{
    border-color: rgba(59,130,246,0.28);
    box-shadow: 0 10px 18px rgba(0,0,0,0.16), 0 0 0 1px rgba(59,130,246,0.10) inset;
}
#action-bar.mode-defense-internal .def-card::before{
    background: linear-gradient(90deg, rgba(59,130,246,0.95), rgba(147,197,253,0.95));
}

/* Défense EXTERNAL (rouge) */
#action-bar.mode-defense-external .def-card{
    border-color: rgba(249,115,22,0.28);
    box-shadow: 0 10px 18px rgba(0,0,0,0.16), 0 0 0 1px rgba(249,115,22,0.10) inset;
}
#action-bar.mode-defense-external .def-card::before{
    background: linear-gradient(90deg, rgba(249,115,22,0.95), rgba(253,186,116,0.95));
}


/* base card */
.skill-card,
.def-card {
    appearance: none;
    border: 0;
    cursor: pointer;

    display: grid;
    grid-template-rows: auto auto auto 1fr;
    gap: 4px;

    width: 100%;
    min-height: 18px;
    padding: 12px;
    border-radius: 16px;

    background: rgba(255,255,255,0.92);
    box-shadow: 0 10px 18px rgba(0,0,0,0.16);
    border: 1px solid rgba(0,0,0,0.06);

    transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;
    text-align: left;
}

.skill-card:hover,
.def-card:hover {
    transform: translateY(-1px);
    box-shadow: 0 14px 22px rgba(0,0,0,0.22);
}

.skill-card:active,
.def-card:active {
    transform: translateY(0);
    filter: brightness(0.98);
}

/* icon + titles */
.skill-icon,
.def-icon {
    font-size: 18px;
    line-height: 1;
}

.skill-title,
.def-title {
    font-size: 13px;
    font-weight: 800;
    color: #0f172a;
    letter-spacing: 0.2px;
}

.skill-sub,
.def-sub {
    font-size: 11px;
    color: rgba(15, 23, 42, 0.70);
}

/* bottom row (power + cost) */
.skill-bottom,
.def-bottom {
    margin-top: 6px;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    gap: 10px;
}

.skill-power,
.def-power {
    font-size: 18px;
    font-weight: 900;
    color: #0f172a;
    font-variant-numeric: tabular-nums;
}

.skill-cost,
.def-cost {
    font-size: 11px;
    font-weight: 700;
    color: rgba(15, 23, 42, 0.75);
    white-space: nowrap;
}

.skill-cost span,
.def-cost span {
    font-weight: 900;
    color: rgba(15, 23, 42, 0.90);
}

/* petit label info si tu l’utilises */
#info-text {
    font-size: 12px;
    color: rgba(15, 23, 42, 0.75);
}

/* ==========================================================================
   MODE 1 JOUEUR — état actif
   ========================================================================== */

#mode-one-player.active {
    background: linear-gradient(135deg, #3b82f6, #2563eb); /* bleu */
    color: #ffffff;
    box-shadow:
        0 2px 2px rgba(37, 99, 235, 0.35),
        0 0 0 2px rgba(255,255,255,0.8) inset;
}

